<script>
	let values = [45, 23, 62, 89];
	let barContainer = document.getElementById("barContainer");
	let explanation = document.getElementById("explanation");

	function renderBars(values) {
		barContainer.innerHTML = "";
		values.forEach((val) => {
			let bar = document.createElement("div");
			bar.classList.add("bar");
			bar.style.height = val + "px";
			bar.textContent = val;
			barContainer.appendChild(bar);
		});
	}

	async function startSort() {
		let arr = [...values];
		let n = arr.length;
		for (let i = 0; i < n; i++) {
			for (let j = 0; j < n - i - 1; j++) {
				explanation.textContent = `Comparing ${arr[j]} and ${arr[j + 1]}`;
				await sleep(700);
				if (arr[j] > arr[j + 1]) {
					explanation.textContent = `Swapping ${arr[j]} and ${arr[j + 1]}`;
					[arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];
					renderBars(arr);
					await sleep(700);
				}
			}
		}
		explanation.textContent = "âœ… Sorting Complete!";
	}

	function sleep(ms) {
		return new Promise((resolve) => setTimeout(resolve, ms));
	}

	renderBars(values);
</script>
{% extends 'skeleton.html' %}
{% block title %}
<!--title-->
{%endblock%} 
{% block page %}
<section id="d.html" contenteditable="{{'true' if all['body_content_editable'] else 'false'}}"><!--start-->
	<div class="content-wrapper">
		<div class="card">
			<h2>ğŸ” Bubble Sort Visualizer</h2>
			<div class="bars" id="barContainer"></div>
			<div id="codeBox">
				<pre>
					for i in range(n):
						for j in range(0, n-i-1):
							if arr[j] > arr[j+1]:
								swap(arr[j], arr[j+1])
				</pre>
			</div>
			<div id="explanation">Click "Start" to begin sorting.</div>
			<button onclick="startSort()">Start</button>
		</div>
	</div>
</section><!--Close-->
{%endblock%}