<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="shortcut icon" href="../static/favicon/{{ web.favicon[0]}}" type="image/x-icon" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
		<link rel="stylesheet" href="../static/css/adminPanel.css">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
		<title>WebPersona-Admin Pannel</title>
		<script>
			function toVarName(inputId, old, New){
				const inputs = document.getElementsByClassName(inputId);
				for(const input of inputs){
					input.value = input.value.replace(old, New)
					input.value = input.value.replace(/[^a-zA-Z0-9_]/g, '');
					if (/^[0-9]/.test(input.value)) {
						input.value = input.value.replace(/^[0-9]+/, ''); 
					}
				}
    		}
			function saveBlock(fileName, blockId, divId) {
				if(confirm('Are you sure!')){
					const iframe = document.getElementById('Iframe');
					const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
					const html = iframeDoc.getElementById(divId).innerHTML.split('\n').filter(line => line !== '').map(line => line + '\n');
					
					fetch('/save-block-multi', {
						method: 'POST',
						headers: { 'Content-Type': 'application/json' },
						body: JSON.stringify({
							file: fileName,
							block: blockId,
							html: html
						})
					})
					.then(response => response.json())
					.then(data => {
						const messageType = data.status === 'success' ? 'success' : 'danger';
						showMessage(data.message, messageType);
					})
					.catch(error => {
						showMessage('Error saving content: ' + error.message, 'danger');
					});
				}
			}
			function changeSize(width, height, contId){
				const container = document.getElementById(contId)
				container.style.height = height;
				container.style.width = width;
				localStorage.setItem('contHeight', height)
				localStorage.setItem('contWidth', width)
			}   
			function showSize(id,content){
				const inp = document.getElementById(id)
				inp.value = content

			}
			function collapse(btnId, panelId) {
				const panel = document.getElementById(panelId);
				const btn = document.getElementById(btnId);
				if (!panel || !btn) return; 
		
				panel.classList.toggle('collapsed');
				localStorage.setItem(panelId, String(panel.classList))
			}
			document.addEventListener('DOMContentLoaded', function(){
				const container = document.getElementById('Iframe');
				const h = localStorage.getItem('contHeight')
				const w = localStorage.getItem('contWidth')

				if(w && h){
					container.style.height = h;
					container.style.width = w;
					document.getElementById('frameSizeInp').value = parseInt(w)
					document.getElementById('frameSizeInpRange').value = parseInt(w)
				}
				else{
					container.style.height = '100%';
					container.style.width = '100%';
				}

				const col = localStorage.getItem('sideCollapsePageCont');
				const col2 = localStorage.getItem('sideCollapseFeaturesCont');
				document.getElementById('sideCollapsePageCont').classList = col
				document.getElementById('sideCollapseFeaturesCont').classList = col2
			}); 
		</script>	
	</head>
	<body>
		{% with messages = get_flashed_messages(with_categories=true) %}
			{% if messages %}
				<div aria-live="polite" aria-atomic="true" class="position-fixed top-0 start-0 p-3 message" style="z-index: 1080">
				{% for category, message in messages %}
					<div class="toast align-items-center text-bg-{{ 'success' if category == 'success' else 'danger' if category in ['error', 'danger'] else 'info' if category == 'info' else 'warning' }} border-0 mb-2 show" role="alert" aria-live="assertive" aria-atomic="true">
					<div class="d-flex">
						<div class="toast-body d-flex align-items-center gap-2">
						{% if category == 'success' %}
							<i class="fas fa-check-circle text-light"></i>
						{% elif category in ['error', 'danger'] %}
							<i class="fas fa-times-circle text-light"></i>
						{% elif category == 'info' %}
							<i class="fas fa-info-circle text-light"></i>
						{% else %}
							<i class="fas fa-exclamation-triangle text-light"></i>
						{% endif %}
						<span>{{ message }}</span>
					</div>
						<button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
					</div>
					</div>
				{% endfor %}
				</div>
				<script>
					document.addEventListener('DOMContentLoaded', function() {
						const toasts = document.querySelectorAll('.toast');
						toasts.forEach(toastEl => {
						const bsToast = new bootstrap.Toast(toastEl, { delay: 3000 });
						bsToast.show();
						});
					});
				</script>
			{% endif %}
		{% endwith %}

		<nav class="navbar navbar-expand-sm">
			<div class="container-fluid">
				<a class="navbar-brand" href="#"><i class="fas fa-cogs me-2"></i>Control Panel</a>
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarNav">
					<ul class="navbar-nav ms-auto" style="gap: 1em;">
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
								Resources
							</a>
							<ul class="dropdown-menu dropdown-menu-dark">
								<li><a class="dropdown-item" href="#">FAQs</a></li>
								<li><a class="dropdown-item" href="#">Help</a></li>
								<li><hr class="dropdown-divider"></li>
								<li><a class="dropdown-item" href="#">Contact</a></li>
							</ul>
						</li>
						<li class="nav-item">
							<a href="/logout" class="nav-link text-danger">
								<i class="fas fa-sign-out-alt me-1"></i>Logout
							</a>
						</li>
					</ul>
				</div>
			</div>
		</nav>
		<main>
		<section id="the_web">
			<div id="implementCodeFormCont" class="implementCodeCont">
				<div id="implementCodeForm" >
					<div class="form_card_header">
						<label id="close" onclick="remove_form('implementCodeCont')"><i class="fas fa-close"></i></label>
						<h2 id="Title">Code Implementation</h2>
					</div>
					<form action="/implement" method="get">
						<div class='form-group'>
							<label for='MainCode'>Code to implement element </label>
							<textarea name='mainCode' id='MainCode' cols="100" rows='20' style="resize: both;" class="form-control-sm"></textarea>
						</div>
						<div class='buttons-group'>
							<button type="button" onclick="remove_form('implementCodeCont')">Cancel</button>
							<button type='submint' >Implement</button>
						</div>
					</form>
				</div>
			</div>
			{% if web.body_content_editable %}
				<div class="form_to_add_card" id="add_form_card" >{% include 'Forms/Form_to_add_form.html' %}</div>
				<div class="form_to_add_card" id="add_table_card">{% include 'Forms/Form_to_add_table.html' %}</div>
				<div class="form_to_add_card" id="add_blog_card" >{% include 'Forms/Form_to_add_blog.html'%}</div>
				<div class="form_to_add_card" id="add_list_card" >{% include 'Forms/Form_to_add_list.html' %}</div>
				<div class="form_to_add_card" id="add_iframe_card" >{% include 'Forms/Form_to_add_iframe.html' %}</div>
				<div class="form_to_add_card" id="add_grid_card" >{% include 'Forms/Form_to_add_grid.html' %}</div>
				<div class="form_to_add_card" id="add_link_card" >{% include 'Forms/Form_to_add_link.html' %}</div>
				<div class="form_to_add_card" id="add_img_cont_card" >{% include 'Forms/Form_to_add_img_card.html' %}</div>
			{% endif %}
			<div id="preview_container">
				<div id="frameContainer" >
					{% if web.debugMode %}
					<form action="">
						<textarea name="changedCode" id="debugTextareaCode" row="150" colum>
							{% for line in web.previewPageHtml %}
								{{line}}
							{%endfor%}
						</textarea>
						<button type='submit'>Apply</button>
					</form>
					{%endif%}
					<iframe src="{{ web.previewPage }}" id="Iframe" ></iframe>
				</div>
			</div>
			<div class="webSettingsCont">
				<div id="sideCollapsePageCont" class="collapsed">
					<span  id="collapseTogglePagePanel" onclick="collapse(this.id, 'sideCollapsePageCont')" ><i class="fas fa-angles-left"></i> <div class="heading">PAGES</div></span>
					<div class="p-2" id="collapsePageContent">
						<div class="container-header mb-3">
							<div class="input-group input-group-sm mt-2">
								<span class="input-group-text" id="search-addon"><i class="fas fa-search"></i></span>
								<input type="text" class="form-control" id="pageSearch" placeholder="Search pages..." aria-label="Search pages" aria-describedby="search-addon">
							</div>
						</div>
						<div class="list-group list-group-flush" id="pagesList">
							{% for page in web.pages %}
								{% if page not in web.unviewPages %}
								<div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center page-item {{'active' if page==web.previewPage }}">
									<span class="page-name">{{page.removesuffix('.html')}}</span>
									<form action="/delete-change-Favicon-page" method="post" class="d-inline-flex gap-2">
										<button type="submit" name="preview_page" value="{{page}}" class="btn btn-sm p-0 px-2 btn-outline-primary" title="Preview Page" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-eye"></i></button>
										{% if page not in web.unremovablePages %}
										<button type="submit" name="delete_page" value="{{page}}" class="btn btn-sm p-0 px-2 btn-outline-danger" title="Delete Page" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-trash-alt"></i></button>
										{% endif %}
									</form>
								</div>
								{% endif %}
							{% endfor %}
							{% for folder in web.folderDict.keys() %}
								<div class="list-group-item folder-header" data-bs-toggle="collapse" data-bs-target="#folder-{{folder}}" aria-expanded="true" aria-controls="folder-{{folder}}">
									<strong>{{folder}}</strong>
									<i class="fas fa-chevron-down float-end"></i>
								</div>
								<div class="collapse show" id="folder-{{folder}}">
									<div class="list-group list-group-flush ps-3">
										{% for page in web.folderDict[folder] %}
										<div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center page-item {{'active' if page== web.previewPage }}">
											<span class="page-name">{{page.removesuffix('.html')}}</span>
											<form action="/delete-change-Favicon-page" method="post" class="d-inline-flex gap-2">
												<button type="submit" name="preview_page" value="{{page}}" class="btn btn-sm p-0 px-2 btn-outline-primary" title="Preview Page" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-eye"></i></button>
												{% if folder != "partials" %}
												<button type="submit" name="delete_page" value="{{folder}}/{{page}}" class="btn btn-sm p-0 px-2 btn-outline-danger" title="Delete Page" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-trash-alt"></i></button>
												{% endif %}
											</form>
										</div>
										{% endfor %}
									</div>
								</div>
							{% endfor %}
						</div>
						<script>
							document.getElementById('pageSearch').addEventListener('keyup', function() {
								let filter = this.value.toLowerCase();
								let items = document.querySelectorAll('#pagesList .page-item');
								items.forEach(function(item) {
									let text = item.querySelector('.page-name').textContent.toLowerCase();
									if (text.includes(filter)) {
										item.style.display = 'flex';
									} else {
										item.style.display = 'none';
									}
								});
							});
						</script>
					</div>
				</div>
				<div id="sideCollapseFeaturesCont" class="collapsed">
					<span id="collapseToggleFeaturesPanel" onclick="collapse(this.id, 'sideCollapseFeaturesCont')"><i class="fas fa-angles-left"></i> <div class="heading">FEATURES</div></span>
					<div class="p-2" id="collapseFeaturesContent">
						<div class="accordion" id="featuresAccordion">
							{% if web.previewPage == 'header.html' %}
							<div class="accordion-item">
								<h2 class="accordion-header" id="headingNav">
									<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseNav" aria-expanded="false" aria-controls="collapseNav">
										<i class="fas fa-compass me-2"></i> Navigation Links
									</button>
								</h2>
								<div id="collapseNav" class="accordion-collapse collapse" aria-labelledby="headingNav" data-bs-parent="#featuresAccordion">
									<div class="accordion-body">
										<form action="/navigation_addition" method="POST">
											<div class="mb-2">
												<label for="navigationText" class="form-label form-label-sm">Link Text & Position</label>
												<div class="input-group">
													<input type="text" id="navigationText" name="navigationText" class="form-control form-control-sm" placeholder="Text" required>
													<input type="number" name="navigationTextPos" class="form-control form-control-sm" placeholder="Pos" style="max-width: 60px;">
												</div>
											</div>
											<div class="mb-3">
												<label for="navigationPage" class="form-label form-label-sm">Select page to navigate</label>
												<select name="navigationPage" id="navigationPage" class="form-select form-select-sm" onchange="toggleExternalLinkInput(this.value)">
													<option value="none">None</option>
													{% for page in web.pages %}
													{% if page not in web.unviewPages %}
													<option value='{{page}}'>{{page}}</option>{% endif %}
													{% endfor %}
													{% for page in web.header_pages %}
													<option value='{{page}}'>{{page}}</option>
													{% endfor %}
													<option value="external">External Link</option>
												</select>
											</div>
											<div class="mb-3" id="externalLinkGroup" style="display: none;">
												<label for="externalLink" class="form-label form-label-sm">External URL</label>
												<input type="url" name="externalLink" id="externalLink" class="form-control form-control-sm" placeholder="https://example.com">
											</div>
											<button type="submit" class="btn btn-primary btn-sm w-100">Add Link</button>
										</form>
										<ul class="list-group list-group-flush">
											{% for nav in web.navigation %}
											<li class="list-group-item list-group-item-sm d-flex justify-content-between align-items-center px-0 py-1">
												<span>{{nav['name']}} <small class="text-muted">({{nav['value']}})</small></span>
												<form action="/Deletion" method="post" class="d-inline">
													<button type="submit" name="delete_navigation" value="{{nav['name']}}" class="btn btn-danger btn-sm p-0 px-2" aria-label="Remove navigation item"><i class="fas fa-trash-alt"></i></button>
												</form>
											</li>
											{% endfor %}
										</ul>
									</div>
								</div>
							</div>
							<script>
								function toggleExternalLinkInput(value) {
									const externalLinkGroup = document.getElementById('externalLinkGroup');
									externalLinkGroup.style.display = (value === 'external') ? 'block' : 'none';
								}
							</script>
							{% endif %}
							<div class="accordion-item">
								<h2 class="accordion-header" id="headingPage">
									<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapsePage" aria-expanded="false" aria-controls="collapsePage">
										<i class="fas fa-file-alt me-2"></i> Add New Page
									</button>
								</h2>
								<div id="collapsePage" class="accordion-collapse collapse" aria-labelledby="headingPage" data-bs-parent="#featuresAccordion">
									<div class="accordion-body">
										<form action="/page_addition" method="POST" enctype="multipart/form-data">
											<input type="text" name="fileName" class="filName form-control form-control-sm mb-2" placeholder="Page name (e.g., about_us)" oninput="toVarName(this.className, ' ', '_')" required/>
											<input type="text" name="title" class="form-control form-control-sm mb-2" placeholder="Title (e.g., about-webpersona)" />
											<div class="d-flex justify-content-end gap-2 mb-3">
												<button type="reset" class="btn btn-outline-secondary btn-sm">Reset</button>
												<button type="submit" class="btn btn-primary btn-sm">Add</button>
											</div>
											<hr>
											<label for="htmlfile" class="form-label form-label-sm">Upload template:</label>
											<div class="input-group input-group-sm">
												<input type="file" name="ownHtml" id="htmlfile" class="form-control" accept=".html, .htm, .py" />
												<button type="submit" class="btn btn-primary">Upload</button>
											</div>
										</form>
									</div>
								</div>
							</div>
							<div class="accordion-item">
								<h2 class="accordion-header" id="headingPictures">
									<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapsePictures" aria-expanded="false" aria-controls="collapsePictures">
										<i class="fas fa-images me-2"></i> Manage Pictures
									</button>
								</h2>
								<div id="collapsePictures" class="accordion-collapse collapse" aria-labelledby="headingPictures" data-bs-parent="#featuresAccordion">
									<div class="accordion-body">
										{% for icon in web.images %}
										<div class="d-flex align-items-center mb-2">
											<img src="../static/images/{{icon}}" alt="{{icon}}" class="me-2" style="width: 24px; height: 24px; object-fit: contain;" />
											<small class="me-auto text-truncate" style="max-width: 120px;">{{icon}}</small>
											<form action="/delete-change-Favicon-page" method="post" class="d-inline-flex gap-1">
												<button type="submit" name="delete_favicon" value="{{icon}}" class="btn btn-outline-danger btn-sm p-0 px-1" title="Remove the image" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-trash-alt"></i></button>
												<button type="submit" name="change_favicon" value="{{icon}}" class="btn btn-outline-secondary btn-sm p-0 px-1" title="Set as Favicon" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-star"></i></button>
												<button type="submit" name="change_logo" value="{{icon}}" class="btn btn-outline-secondary btn-sm p-0 px-1" title="Set as Logo" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-plus-circle"></i></button>
												<button type="submit" name="set_to_page" value="{{icon}}" class="btn btn-outline-secondary btn-sm p-0 px-1" title="Set image to page" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-file-image"></i></button>
											</form>
										</div>
										{% endfor %}
										<hr>
										<form action="/faviconAddition" method="post" enctype="multipart/form-data">
											<div class="input-group input-group-sm">
												<input type="file" name="icon_path" class="form-control" accept="image/*" required />
												<button type="submit" class="btn btn-primary">Upload</button>
											</div>
										</form>
									</div>
								</div>
							</div>
							<div class="accordion-item">
								<h2 class="accordion-header" id="headingTheme">
									<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTheme" aria-expanded="false" aria-controls="collapseTheme">
										<i class="fas fa-palette me-2"></i> Choose Theme
									</button>
								</h2>
								<div id="collapseTheme" class="accordion-collapse collapse" aria-labelledby="headingTheme" data-bs-parent="#featuresAccordion">
									<div class="accordion-body">
										<form action="/theme-rotate" method="post" class="d-flex justify-content-between align-items-center">
											<button type="submit" name="change_theme" value="left" class="btn btn-outline-secondary btn-sm"><i class="fa fa-angle-left"></i></button>
											<span class="mx-2 text-center small">{{ web.themes[-19:][0].removesuffix('*/\n').removeprefix('/*') }}</span>
											<button type="submit" name="change_theme" value="right" class="btn btn-outline-secondary btn-sm"><i class="fas fa-angle-right"></i></button>
										</form>
									</div>
								</div>
							</div>
							<div class="accordion-item">
								<h2 class="accordion-header" id="headingDetails">
									<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDetails" aria-expanded="false" aria-controls="collapseDetails">
										<i class="fas fa-user me-2"></i> Your Details
									</button>
								</h2>
								<div id="collapseDetails" class="accordion-collapse collapse" aria-labelledby="headingDetails" data-bs-parent="#featuresAccordion">
									<div class="accordion-body">
										<form action="" method="post">
											{% for key, value in web.admin_details.items() %}
											<div class="input-group input-group-sm mb-2">
												<span class="input-group-text" style="min-width: 70px;">{{key}}</span>
												<input type="text" class="form-control" value="{{value}}" aria-label="{{key}}">
											</div>
											{%endfor%}
											<button class="btn btn-outline-primary btn-sm mt-2">Save</button>
										</form>
									</div>
								</div>
							</div>
							<div class="accordion-item">
								<h2 class="accordion-header" id="headingSettings">
									<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSettings" aria-expanded="false" aria-controls="collapseSettings">
										<i class="fas fa-tools me-2"></i> Editor Settings
									</button>
								</h2>
								<div id="collapseSettings" class="accordion-collapse collapse" aria-labelledby="headingSettings" data-bs-parent="#featuresAccordion">
									<div class="accordion-body">
										<form action="/Content-editable" method="post" class="form-check form-switch">
											<input class="form-check-input" type="checkbox" role="switch" id="Content_editable" name="contentEditable" onchange="this.form.submit()" {% if web.body_content_editable %}checked{% endif %}>
											<label class="form-check-label" for="Content_editable">Content Editable</label>
											{% if web.body_content_editable %}<div class="form-text text-danger mt-1 small"><i class="fas fa-info-circle"></i> Turn off before leaving.</div>{% endif %}
										</form>
										<hr class="my-2">
										<form action="/Debug-mode" method="POST" class="form-check form-switch">
											<input class="form-check-input" type="checkbox" role="switch" name="debugMode" id="debugging" onchange="this.form.submit()" {% if web.debugMode %}checked{% endif %}>
											<label class="form-check-label" for="debugging">Debug Mode</label>
										</form>
									</div>
								</div>
							</div>
							<div class="accordion-item" >
								<div id="sizelist" class="input-group-sm">
									<input type="range" min="200" max="2560" oninput="changeSize(String(this.value)+'px', '100%', 'Iframe'), showSize('frameSizeInp', this.value)" id="frameSizeInpRange" class="form-range">
						
									<input type="number" name="" style="width: 4.5em;" class="form-control" id="frameSizeInp" oninput="changeSize(String(this.value)+'px', '100%', 'Iframe'), showSize('frameSizeInpRange', this.value)" />
								</div>
							</div>
				
							<div class="accordion-item  {% if web.body_content_editable %}{%else%}disabledButtonCont{%endif%}">
								<div class="editor-toolbar-wrapper {% if web.body_content_editable %}{%else%}disabledButtonCont{%endif%}">
									<div class="btn-group me-2" role="group" aria-label="Add elements group">
										<button type="button" class="btn btn-light" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Add Form" onclick="show_form('add_form_card')"><i class="fa-solid fa-file-alt"></i></button>
										<button type="button" class="btn btn-light" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Add Table" onclick="show_form('add_table_card')"><i class="fas fa-table"></i></button>
										<button type="button" class="btn btn-light" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Add Blog/Content" onclick="show_form('add_blog_card')"><i class="fab fa-blogger-b"></i></button>
										<button type="button" class="btn btn-light" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Add List" onclick="show_form('add_list_card')"><i class="fas fa-list"></i></button>
										<button type="button" class="btn btn-light" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Add Iframe" onclick="show_form('add_iframe_card')"><i class="far fa-file-code"></i></button>
										<button type="button" class="btn btn-light" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Add Grids" onclick="show_form('add_grid_card')"><i class="fas fa-th"></i></button>
										<button type="button" class="btn btn-light" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Add Link" onclick="show_form('add_link_card')"><i class="fas fa-link"></i></button>
										<button type="button" class="btn btn-light" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Add Image  Card" onclick="show_form('add_img_cont_card')"><i class="fas fa-images"></i></button>
									</div>
									<button type="button" class="btn btn-success mt-2 w-100" onclick="saveBlock('{{web.previewPage}}', '{{web.previewPage}}', '{{web.previewPage}}')" title="Save Changes" data-bs-toggle="tooltip" data-bs-placement="bottom" ><i class="fas fa-save"></i> Save Changes</button>
									<script>
										const allForms = document.querySelectorAll('.form_to_add_card');

										function show_form(targetId) {
											const targetForm = document.getElementById(targetId);
											if (!targetForm) return;

											const isVisible = targetForm.style.display === 'flex';

											// Hide all forms first
											allForms.forEach(form => form.style.display = 'none');

											// If the target form was not visible, show it
											if (!isVisible) {
												targetForm.style.display = 'flex';
											}
										}

										function remove_form(className) {
											const forms = document.getElementsByClassName(className);
											for (let i = 0; i < forms.length; i++) {
												forms[i].style.display = 'none';
											}
										}

										document.addEventListener('DOMContentLoaded', function () {
											const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
											const tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
												return new bootstrap.Tooltip(tooltipTriggerEl);
											});

											// disable if not avaible
											const Dcont = document.getElementsByClassName('disabledButtonCont');

											for (let c of Dcont) {
												const children = c.querySelectorAll('button, input[type="submit"], input[type="button"]');
												for (let child of children) {
													child.disabled = true;
												}
											}
										});
									</script>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<section id="database_container">
			<h2>Users</h2>
			<table class="table table-stripped">
				<tr>
					<th>#</th>
					<th>Name</th>
					<th>Email</th>
					<th>Password</th>
					<th>Actions</th>
				</tr>
			{%for user in web.user_db%}
				<tr>
					<td>{{user.id}}</td>
					<td>{{user.name}}</td>
					<td>{{user.email}}</td>
					<td>{{user.password}}</td>
					<td><button type="button" class="btn btn-outline-danger btn-sm">d</button></td>
				</tr>
			{%endfor%}
			</table>
		</section>
		</main>
	</body>
</html>